package com.wr.controller;

import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.RestController;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import reactor.core.publisher.Mono;
import springfox.documentation.swagger.web.*;

import java.util.Optional;

@RestController
public class SwaggerHandler {

    @Autowired(required = false)
    private SecurityConfiguration securityConfiguration;

    @Autowired(required = false)
    private UiConfiguration uiConfiguration;

    private final SwaggerResourcesProvider swaggerResources;

    @Autowired
    public SwaggerHandler(SwaggerResourcesProvider swaggerResources) {
        this.swaggerResources = swaggerResources;
    }


    @GetMapping("/swagger-resources/configuration/security")
    public Mono<ResponseEntity<SecurityConfiguration>> securityConfiguration() {
        return Mono.just(new ResponseEntity<>(
                Optional.ofNullable(securityConfiguration).orElse(SecurityConfigurationBuilder.builder().build()), HttpStatus.OK));
    }

    @GetMapping("/swagger-resources/configuration/ui")
    public Mono<ResponseEntity<UiConfiguration>> uiConfiguration() {
        return Mono.just(new ResponseEntity<>(
                Optional.ofNullable(uiConfiguration).orElse(UiConfigurationBuilder.builder().build()), HttpStatus.OK));
    }

    @GetMapping("/swagger-resources")
    public Mono<ResponseEntity> swaggerResources() {
        return Mono.just((new ResponseEntity<>(swaggerResources.get(), HttpStatus.OK)));
    }


//    @GetMapping("/favicon.ico")
//    public String favicon() {
//        return "data:image/png;base64,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";
//    }
}